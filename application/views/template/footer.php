

<script type="text/javascript">
	var base_url = '<?php echo base_url() ?>';
</script>
<!-- Javascript -->
<!-- <script src="<?php //echo base_url()?>assets/js/pages/tables/jquery-3.3.1.js"></script> -->
<script src="<?php echo base_url()?>assets/js/jquery-1.12.4.js"></script>
<!-- <script src="<?php //echo base_url()?>assets/js/jquery.form.js"></script> -->
<!-- Jquery UI -->
<script src="<?php echo base_url()?>assets/js/jquery-ui/jquery-ui.js"></script>
<script src="<?php echo base_url()?>assets/js/popper/dist/umd/popper.min.js"></script>

<!-- <script src="<?php //echo base_url()?>assets/bundles/libscripts.bundle.js"></script> -->
<script src="<?php echo base_url()?>assets/bundles/vendorscripts.bundle.js"></script>
<script src="<?php echo base_url()?>assets/bundles/chartist.bundle.js"></script>
<script src="<?php echo base_url()?>assets/bundles/mainscripts.bundle.js"></script>

<script src="<?php echo base_url()?>assets/vendor/jquery-datatable/buttons/jquery.dataTables.min.js"></script>
<script src="<?php echo base_url()?>assets/vendor/jquery-datatable/buttons/dataTables.bootstrap.min.js"></script>
<!-- 
<script src="<?php //echo base_url()?>assets/bundles/vendorscripts.bundle.js"></script>
-->

<script src="<?php echo base_url()?>assets/vendor/toastr/toastr.js"></script>
<!-- <script src="<?php //echo base_url()?>assets/bundles/chartist.bundle.js"></script> -->
<script src="<?php echo base_url()?>assets/bundles/knob.bundle.js"></script> <!-- Jquery Knob-->
<!--
<script src="<?php //echo base_url()?>assets/bundles/mainscripts.bundle.js"></script>
-->
<!--<script src="<?php //echo base_url()?>assets/js/index.js"></script> -->

<script src="<?php echo base_url()?>assets/js/bootstrap.min.js"></script>


<script src="<?php echo base_url()?>assets/bundles/jvectormap.bundle.js"></script> <!-- JVectorMap Plugin Js -->
<script src="<?php echo base_url()?>assets/bundles/morrisscripts.bundle.js"></script><!-- Morris Plugin Js -->
<script src="<?php echo base_url()?>assets/vendor/nestable/jquery.nestable.js"></script> <!-- Jquery Nestable -->

<script src="<?php echo base_url()?>assets/js/pages/ui/sortable-nestable.js"></script>
<!-- <script src="<?php //echo base_url()?>assets/js/index2.js"></script>
<script src="<?php //echo base_url()?>assets/js/Chart.min.js"></script>
<script src="<?php //echo base_url()?>assets/js/grafik.js"></script> -->

<script src="<?php echo base_url()?>assets/bundles/fullcalendarscripts.bundle.js"></script>
<script src="<?php echo base_url()?>assets/vendor/fullcalendar/fullcalendar.js"></script>

<!-- Datatable -->
<script src="<?php echo base_url()?>assets/bundles/datatablescripts.bundle.js"></script>
<script src="<?php echo base_url()?>assets/vendor/jquery-datatable/buttons/dataTables.buttons.min.js"></script>
<!-- <script src="<?php //echo base_url()?>assets/vendor/jquery-datatable/buttons/dataTables.editor.min.js"></script> -->
<script src="<?php echo base_url()?>assets/vendor/jquery-datatable/buttons/buttons.bootstrap4.min.js"></script>
<script src="<?php echo base_url()?>assets/vendor/jquery-datatable/buttons/buttons.colVis.min.js"></script>
<script src="<?php echo base_url()?>assets/vendor/jquery-datatable/buttons/buttons.html5.min.js"></script>
<script src="<?php echo base_url()?>assets/vendor/jquery-datatable/buttons/buttons.print.min.js"></script>
<script src="<?php echo base_url()?>assets/js/pages/tables/jquery-datatable.js"></script>
<script src="<?php echo base_url()?>assets/js/pages/tables/dataTables.responsive.min.js"></script>
<script src="<?php echo base_url()?>assets/js/pages/tables/dataTables.fixedHeader.min.js"></script>
<script src="<?php echo base_url()?>assets/js/pages/tables/responsive.bootstrap.min.js"></script>
<script src="<?php echo base_url()?>assets/vendor/jquery-datatable/buttons/dataTables.buttons.min.js"></script>
<script src="<?php echo base_url()?>assets/js/orgchart.js"></script>
<!-- <script src="<?php //echo base_url()?>assets/vendor/select2/select2.min.js"></script> -->
<script src="<?php echo base_url()?>assets/vendor/s2/select2.full.js"></script>
<script src="<?php echo base_url()?>assets/vendor/jquery-validation/jquery.validate.js"></script>
<script src="<?php echo base_url()?>assets/vendor/jquery-steps/jquery.steps.js"></script>

<script src="<?php echo base_url()?>assets/vendor/toastr/toastr.js"></script>
<script src="<?php echo base_url()?>assets/js/modal.js"></script>
<!-- <script src="<?php //echo base_url()?>assets/vendor/bootstrap-datepicker/js/bootstrap-datepicker.min.js"></script> -->

<script src="<?php echo base_url()?>assets/vendor/moment.js"></script>
<!-- Datetime Picker -->
<script src="<?php echo base_url(); ?>assets/js/jquery.datetimepicker.full.js"></script>
<script src="<?php echo base_url(); ?>assets/vendor/summernote/dist/summernote.js"></script>

<!-- Croppir -->
<script src="<?php echo base_url()?>assets/js/croppie.js"></script>
<script src="<?php echo base_url()?>assets/vendor/sweetalert2/dist/sweetalert2.min.js"></script>
<script src="<?php echo base_url()?>assets/vendor/jquery-inputmask/jquery.inputmask.bundle.js"></script> <!-- Input Mask Plugin Js --> 
<script src="<?php echo base_url()?>assets/vendor/jquery.maskedinput/jquery.maskedinput.min.js"></script>
<script src="<?php echo base_url()?>assets/js/bootbox.all.js"></script>
<!--
<script src="<?php //echo base_url()?>assets/js/jquery.number.js"></script> 
-->
<script src="<?php echo base_url()?>assets/js/autoNumeric.js"></script>
<script src="<?php echo base_url()?>assets/vendor/parsleyjs/js/parsley.min.js"></script>
<script src="<?php echo base_url()?>assets/js/pages/forms/form-wizard.js"></script>

<script src="<?php echo base_url()?>assets/vendor/dropify/js/dropify.min.js"></script>
<script src="<?php echo base_url()?>assets/js/pages/forms/dropify.js"></script>

<script src="<?php echo base_url()?>assets/bundles/fullcalendarscripts.bundle.js"></script><!--/ calender javascripts --> 
<script src="<?php echo base_url()?>assets/vendor/fullcalendar/fullcalendar.js"></script><!--/ calender javascripts --> 


<script type="text/javascript">
  $(document).ready(function() {
     $('.metismenu li').click(function(){
      $('.metismenu li').removeClass('opened');
      $('.metismenu li').removeClass('active');
      $(this).addClass('opened');
      $(this).addClass('active');
      $('.metismenu li ul').addClass('collapse');
      $('.metismenu li ul').removeClass('in');
      $('.metismenu li ul').removeClass('collapsing');
      $(this).find('ul').addClass('collapse in');
      $(this).find('ul').css('height','auto');
     console.log($(this));
    });
    
    $('.tglval').keydown(function (event){
      event.preventDefault();
    });
  });
</script>

<script type="text/javascript">
$( function() {

    var dateFormat = "mm/dd/yy",
      from = $( "#start" )
        .datepicker({
          defaultDate: new Date(),
            <?php
            if(isset($menuId) && isset($menuId[2]) && $menuId[0]=="118" && $menuId[1]=="40" && $menuId[2]=="1"){
            ?>
            minDate:new Date(),
            <?php
            }
            ?>
          changeMonth: true,
          changeYear: true,
          numberOfMonths: 1,
          dateFormat : 'dd/mm/yy',
           beforeShow:function(a,b){
            setTimeout(function(){
              $('.ui-datepicker').css('z-index', 99999999999999);
            }, 0);
          }
        })
        .on( "change", function() {
          to.datepicker( "option", "minDate", getDate( this ) );
          var datanya = $(this).data("id");
          var date = $(this).datepicker("getDate");
            //console.log("start->"+$.datepicker.formatDate("yy-mm-dd", date));
            $("#"+datanya).val($.datepicker.formatDate("yy-mm-dd", date));
        }),
      to = $( "#end" ).datepicker({
        defaultDate: "+1w",
        changeYear: true,
        changeMonth: true,
        numberOfMonths: 1,
        dateFormat : 'dd/mm/yy',
        beforeShow:function(a,b){
          setTimeout(function(){
            $('.ui-datepicker').css('z-index', 99999999999999);
        }, 0);
            var minDate = $("#start").datepicker("getDate");
            //maxDate.setDate(maxDate.getDate())
            //console.log(minDate);
            to.datepicker('option','minDate',minDate);
            <?php
            if(isset($menuId) && isset($menuId[2]) && $menuId[0]=="118" && $menuId[1]=="40" && $menuId[2]=="1"){
                 $TotCuti=0; 
                 $sisa=0;
                foreach ($dataLeaves->result() as $leave ) { 
                    if ($leave->status == 1) {
                        $TotCuti=$TotCuti+$leave->lama_cuti;
                    }
                    $sisa = $leave->saldo_cuti-$TotCuti;
                } 
                
            ?>
            var maxDate = $("#start").datepicker("getDate");
            maxDate.setDate(maxDate.getDate()+<?php echo $sisa; ?>);
            to.datepicker('option','maxDate',maxDate);
            <?php
            }
            ?>
        }
      })
      .on( "change", function() {
        var datanya = $(this).data("id");
        var date = $(this).datepicker("getDate");
            //console.log("end->"+$.datepicker.formatDate("yy-mm-dd", date));
            $("#"+datanya).val($.datepicker.formatDate("yy-mm-dd", date));
        //from.datepicker( "option", "maxDate", getDate( this ) );
      });
 
   
  } );
 function getDate( element ) {
      var date;
      try {
        date = $.datepicker.parseDate( dateFormat, element.value );
      } catch( error ) {
        date = null;
      }
 
      return date;
    }
function ribuan(thisnya,valuenya){
    var ribu=formatRupiah(valuenya);
    $(thisnya).val(ribu);
    var datanya = $(thisnya).data("id");
    $("#"+datanya).val(ribu.split(".").join(""));
}
function delimiterRupiah(angka){
    var max_chars = 15;
    if(angka.length > max_chars) {
        return angka.substr(0, max_chars);
    } else {
        var rupiah = addRibuan(angka);
        return (rupiah ? rupiah : '');
    }
}

	function hanyaAngka(evt) {
	  var charCode = (evt.which) ? evt.which : event.keyCode
	   if (charCode > 31 && (charCode < 48 || charCode > 57))

	    return false;
	  return true;
	}
    function hanyaHuruf(e) {
        return (e.charCode > 64 && e.charCode < 91) || (e.charCode > 96 && e.charCode < 123) || e.charCode == 32;   
    }
    function Alamat(e) {
        var keyCode = e.keyCode || e.which;
        var regex = /^[A-Za-z0-9 _./*()&+-]*$/;
        var isValid = regex.test(String.fromCharCode(keyCode));
        return isValid;
    }
    function addRibuan(angka){
        var number_string = parseInt(angka.toString().replace(/[^,\d]/g, '')).toString(),
    		split   		= number_string.split(','),
    		sisa     		= split[0].length % 3,
    		rupiah     		= split[0].substr(0, sisa),
    		ribuan     		= split[0].substr(sisa).match(/\d{3}/gi);
            
    		// tambahkan titik jika yang di input sudah menjadi angka ribuan
    		if(ribuan){
    			separator = sisa ? '.' : '';
    			rupiah += separator + ribuan.join('.');
    		}
    
    		rupiah = split[1] != undefined ? rupiah + ',' + split[1] : rupiah;
        return rupiah;
    }
    function formatRupiah(angka){
        var max_chars = 15;
        if(angka.length > max_chars) {
            return angka.substr(0, max_chars);
        } else {
            var rupiah = addRibuan(angka);
            return (rupiah ? rupiah : '');
        }
	}
    function new_alert(title,message,result){
        /* result = warning/success/error */
        const swalWithBootstrapButtons = Swal.mixin({
          customClass: {
            confirmButton: 'btn btn-blue1',
            cancelButton: 'btn btn-red1'
          },
          buttonsStyling: false,
          allowOutsideClick: false
        });
        swalWithBootstrapButtons.fire(title, message, result);
    }
    $(function() {
        $('.datepicker2').datepicker({
                showButtonPanel: true,
                changeMonth: true,
                changeYear: true,
                dateFormat : 'dd/mm/yy'
            }).on( "change", function() {
                var datanya = $(this).data("id");
            var date = $(this).datepicker("getDate");
            //console.log("end->"+$.datepicker.formatDate("yy-mm-dd", date));
            $("#"+datanya).val($.datepicker.formatDate("yy-mm-dd", date));
        //from.datepicker( "option", "maxDate", getDate( this ) );
        });
      });

    $(document).ready(function(){
       $(".select2").select2({ width: 'resolve' });
       
       var drEvent = $('#dropify-event').dropify();
        <?php if ($this->session->flashdata('msg') != '') { ?>
        new_alert("<?php echo $this->session->flashdata('title'); ?>","<?php echo $this->session->flashdata('msg'); ?>", "<?php echo $this->session->flashdata('result'); ?>");
       <?php } ?> 
    });
  // function buatTable(id){
  //   var urlny = $("#"+id).data("url");
  //   $('#'+id).DataTable( {
  //           "processing": true,
  //           "serverSide": true,
  //           "responsive":true,
  //           "bDestroy":true,
  //           "ajax":{
  //               url : urlny, // json datasource
  //               type: "post",  // method  , by default get
  //               data:{},
  //               error: function(){  // error handling
  //                   $("."+id+"-error").html("");
  //                   $("#"+id).append('<tbody class="'+id+'-error"><tr><th>No data found in the server</th></tr></tbody>');
                    
                    
  //               }
  //           },
  //           fnDrawCallback:function(oSettings){

  //           }
  //       } );
  //   //alert(urlny);
  //   /* $('#'+id).DataTable( {
  //       "processing": true,
  //       "serverSide": true,
  //       "ajax": "../server_side/scripts/server_processing.php"
  //   } ); */
  // }
    function samplepopup() {
        const swalWithBootstrapButtons = Swal.mixin({
          customClass: {
            confirmButton: 'btn btn-blue1',
            cancelButton: 'btn btn-red1'
          },
          buttonsStyling: false,
        });
        swalWithBootstrapButtons.fire({
            title: "Are you sure?",
            text: "You will not be able to recover this imaginary file!",
            type: "warning",
            showCancelButton: true,
            confirmButtonColor: "#dc3545",
            confirmButtonText: "Yes, delete it!",
            cancelButtonText: "No, cancel plx!",
            //closeOnConfirm: false,
            //closeOnCancel: false,
            reverseButtons: true,
            allowOutsideClick: false
        }).then((result) => {
          if (result.value) {
            swalWithBootstrapButtons.fire("Deleted!", "Your imaginary file has been deleted.", "success");
          } else if (result.dismiss === Swal.DismissReason.cancel) {
            swalWithBootstrapButtons.fire("Cancelled", "Your imaginary file is safe :)", "error");
          }
        });
    }
    
    function pilihKab(idprov,idkabsel){
        if(idprov!=""){
            $.ajax({
                  type: "POST",
              url: "<?php echo base_url(); ?>HR/ambilKab", 
              data: {id_provinsi : idprov}, 
              dataType: "json",
              beforeSend: function(e) {
                if(e && e.overrideMimeType) {
                  e.overrideMimeType("application/json;charset=UTF-8");
                }
              },
              success: function(response){ 
                $("#rowkab").show();
                $("#selkab").html(response.data_kabupaten).show();
                //$("#selkab").select2();
                if(idkabsel!=0){
                    $('#selkab option[value='+idkabsel+']').attr('selected','selected');
                } else {
                    $("#rowkec").hide();
                } 
                
              },
              error: function (xhr, ajaxOptions, thrownError) { 
                alert(thrownError); 
              }
            }); 
        } else {
            $("#rowkab").hide();
            $("#rowkec").hide();
        }
    }
    function pilihKabLokasi(idprov,idkabsel){
        if(idprov!=""){
            $.ajax({
                  type: "POST",
              url: "<?php echo base_url(); ?>HR/ambilKabLokasi", 
              data: {id_provinsi : idprov}, 
              dataType: "json",
              beforeSend: function(e) {
                if(e && e.overrideMimeType) {
                  e.overrideMimeType("application/json;charset=UTF-8");
                }
              },
              success: function(response){ 
                $("#rowkab").show();
                $("#selkab").html(response.data_kabupaten).show();
                //$("#selkab").select2();
                if(idkabsel!=0){
                    $('#selkab option[value='+idkabsel+']').attr('selected','selected');
                } else {
                    $("#rowkec").hide();
                } 
                
              },
              error: function (xhr, ajaxOptions, thrownError) { 
                alert(thrownError); 
              }
            }); 
        } else {
            $("#rowkab").hide();
            $("#rowkec").hide();
        }
    }
    
    function pilihKec(idkab,idkecsel){
        if(idkab!=""){
            $.ajax({
                  type: "POST",
              url: "<?php echo base_url(); ?>HR/ambilKec", 
              data: {id_kabupaten : idkab}, 
              dataType: "json",
              beforeSend: function(e) {
                if(e && e.overrideMimeType) {
                  e.overrideMimeType("application/json;charset=UTF-8");
                }
              },
              success: function(response){ 
                $("#rowkec").show();
                $("#selkec").html(response.data_kecamatan).show();
                //$("#selkec").select2();
                if(idkecsel!=0){
                    $('#selkec option[value='+idkecsel+']').attr('selected','selected');
                }
                
              },
              error: function (xhr, ajaxOptions, thrownError) { 
                alert(thrownError); 
              }
            }); 
        } else {
            $("#rowkec").hide();
        }
    }
    function pilihPerusahaan(idperusahaan){
        if(idperusahaan!=""){
            $.ajax({
                  type: "POST",
              url: "<?php echo base_url(); ?>HR/ambilPerusahaan", 
              data: {id_perusahaan : idperusahaan}, 
              dataType: "json",
              beforeSend: function(e) {
                if(e && e.overrideMimeType) {
                  e.overrideMimeType("application/json;charset=UTF-8");
                }
              },
              success: function(response){ 
                $("#dept").html(response.data_departemen).show();
                $("#idlokasi").val(response.data_lokasi);
              },
              error: function (xhr, ajaxOptions, thrownError) { 
                alert(thrownError); 
              }
            }); 
        } else {
            //$("#rowkab").hide();
            //$("#rowkec").hide();
        }
    }
</script>
<script type="text/javascript">
      $(document).ready(function(){
          $(".Logout").click(function(){
              const swalWithBootstrapButtons = Swal.mixin({
                customClass: {
                  confirmButton: 'btn btn-blue1',
                  cancelButton: 'btn btn-red1'
                },
                buttonsStyling: false,
              });
                 
                      swalWithBootstrapButtons.fire({
                          title: "Apakah Anda yakin?",
                          text: "Anda yakin ingin Keluar? ",
                          type: "warning",
                          showCancelButton: true,
                          confirmButtonColor: "#dc3545",
                          confirmButtonText: "Ya",
                          cancelButtonText: "Tidak",
                          //closeOnConfirm: false,
                          //closeOnCancel: false,
                          reverseButtons: true,
                          allowOutsideClick: false
                      }).then((result) => {
                          if (result.value) {
                             $.ajax({
                                  type: 'POST',
                                  url: "<?php echo base_url()?>home/prosesLogout?>",
                                 success: function(data) {
                                      swalWithBootstrapButtons.fire("Sukses", "Logout", "success");
                                      var curdate = new Date();
                                      var format = formatDate(curdate);
                                      var status = 'signout';
                                      var exp = new Date();
                                      //clearTimeout(t);
                                      seconds = 0; minutes = 0; hours = 0;
                                      setCookie('time', "00:00:00", exp);
                                      setCookie('absen', "00:00:00", exp);
                                      //update();
                                      //waktu = window.setInterval(update, 1000);
                                      deleteCookie('lunch');
                                      deleteCookie('break');
                                      deleteCookie('extra');
                                      deleteCookie('time');
                                      deleteCookie('absen');
                                      setTimeout(function(){
                                              window.location.href="<?php echo base_url()?>home/login";
                                           
                                      },2000);
                                  }
                              });
                          } else if (result.dismiss === Swal.DismissReason.cancel) {
                              swalWithBootstrapButtons.fire("Cancelled", "Transaksi dibatalkan", "error");
                          }
                      });
              
          });
      });
    function formatDate(date) {
        var hours = date.getHours();
        var minutes = date.getMinutes();
        var seconds = date.getSeconds();
        // var ampm = hours >= 12 ? 'pm' : 'am';
        var dates = ('0' + date.getDate()).slice(-2);
        var months = ('0' + (date.getMonth()+1)).slice(-2);
        var years = date.getFullYear();
        hours = hours % 24;
        hours = hours ? hours : 24; // the hour '0' should be '12'
        minutes = minutes < 10 ? '0'+minutes : minutes;
        var strTime = ('0' + hours).slice(-2) + ':' + ('0' + minutes).slice(-2) + ':' + ('0' + seconds).slice(-2);
        return  years + '-'+ months + "-" + dates + " " + strTime;
    }
    function setCookie(name, value, expires) {
    document.cookie = name + "=" + value + "; path=/" + ((expires == null) ? "" : "; expires=" + expires.toGMTString());
  }

  function getCookie(name) {
    var cname = name + "=";
    var dc = document.cookie;

    if (dc.length > 0) {
      begin = dc.indexOf(cname);
      if (begin != -1) {
      begin += cname.length;
      end = dc.indexOf(";", begin);
        if (end == -1) end = dc.length;
        return unescape(dc.substring(begin, end));
      }
    }
    return null;
  }
  function deleteCookie(cname) {
      var d = new Date(); //Create an date object
        d.setTime(d.getTime() - (1000*60*60*24)); //Set the time to the past. 1000 milliseonds = 1 second
        var expires = "expires=" + d.toGMTString(); //Compose the expirartion date
        window.document.cookie = cname+"="+"; "+expires;//Set the cookie with name and the expiration date

    }
  </script>
  <script type="text/javascript">
    $(document).ready(function(){
        jQuery('#waktuawal').datetimepicker();
    })
  
</script>